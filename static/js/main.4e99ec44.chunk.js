(this["webpackJsonppurring-cats"]=this["webpackJsonppurring-cats"]||[]).push([[0],{276:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),i=n(8),c=n(58),o=n(34),u=n(125),s=n.n(u),l=n(24),d=n(22),p=n(12),f=n(13);function b(){var e=Object(p.a)(["\n  width: 160px;\n  height: 90px;\n  background-image: url(/image/",");\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n"]);return b=function(){return e},e}var j=f.a.div(b(),(function(e){return e.image})),v=function(e){var t=e.image;return Object(r.jsx)(j,{image:t})};function g(){var e=Object(p.a)(["\n  color: #fff;\n  background-color: #161718;\n  text-decoration: none;\n  height: 60px;\n  line-height: 60px;\n  padding: 0 2.5rem;\n  border-radius: 1rem;\n  position: relative;\n  overflow: hidden;\n\n  &:hover {\n    &::before {\n      top: -100%;\n    }\n    &::after {\n      top: 0;\n    }\n  }\n\n  &::before,\n  &::after {\n    content: attr(data-label);\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    transition: 250ms;\n    display: flex;\n    justify-content: center;\n  }\n\n  &::before {\n    background-color: #161718;\n    color: #fff;\n  }\n\n  &::after {\n    background-color: #dea9ff;\n    color: #000;\n    top: 100%;\n  }\n"]);return g=function(){return e},e}Object(f.a)(o.a)(g());var O=n(305),m=n(5),h=n(318);function x(){var e=Object(p.a)(["\n  grid-column: 2/4;\n  grid-row: 1/2;\n"]);return x=function(){return e},e}function y(){var e=Object(p.a)(["\n  display: grid;\n  margin: 0 auto;\n  grid-template-columns: repeat(2, auto);\n  grid-gap: 1rem;\n"]);return y=function(){return e},e}function k(){var e=Object(p.a)(["\n  && > span {\n    pointer-events: none;\n  }\n"]);return k=function(){return e},e}var w=Object(f.a)(O.a)(k()),_=f.a.nav(y()),I=(f.a.div(x()),Object(m.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(h.a)),S=function(){var e=Object(a.useState)(""),t=Object(d.a)(e,2),n=(t[0],t[1],function(e){var t=e.target.name;console.log(t,e.target),Object(o.c)(t)});return Object(r.jsxs)(_,{children:[Object(r.jsx)(I,{title:Object(r.jsx)(v,{image:"home.gif"}),children:Object(r.jsx)(w,{variant:"contained",color:"primary",name:"/",onClick:n,children:"Purring Cats"})}),Object(r.jsx)(I,{title:Object(r.jsx)(v,{image:"upload.gif"}),children:Object(r.jsx)(w,{variant:"contained",color:"primary",name:"/upload",onClick:n,children:"Upload"})})]})},T=n(18),E=n.n(T),C=n(38),U=n(27),R=n(310),V=n(311),z=n(312),D=n(313),N=n(314),L=n(315),A=n(316),F="https://api.thecatapi.com/v1",P="6e3d9999-4325-4d3f-a37a-58c1807b45ab",X="[cat list] INIT_LIST",q="[cat favourite] INIT_FAVOURITE",J="[cat favourite] UPDATE_FAVOURITE",M=function(e,t){return{type:J,payload:{imageId:e,favouriteId:t}}},W="[cat vote] INIT_VOTE",B="[cat vote] UPDATE_VOTE";function H(){var e=Object(p.a)(["\n  display: grid;\n  max-width: 1680px;\n  margin: 1rem auto;\n  grid-template-columns: repeat(auto-fit, minmax(340px, 1fr));\n  grid-gap: 1rem;\n"]);return H=function(){return e},e}function K(){var e=Object(p.a)(["\n  padding-top: 56.25%;\n  background-image: url(",");\n  background-size: cover;\n  background-position: center center;\n"]);return K=function(){return e},e}function G(){var e=Object(p.a)(["\n  margin-top: 0.5rem;\n  display: grid;\n  grid-template-columns: 1fr repeat(3, auto);\n  grid-gap: 0.5rem;\n"]);return G=function(){return e},e}var Q=f.a.div(G()),Y=f.a.div(K(),(function(e){return e.image})),Z=f.a.div(H()),$=Object(m.a)((function(e){return{tooltip:{backgroundColor:"#f5f5f9",color:"rgba(0, 0, 0, 0.87)",maxWidth:220,fontSize:e.typography.pxToRem(12),border:"1px solid #dadde9"}}}))(h.a),ee=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){var t=e.cat;return[t.list,t.favourite,t.vote]})),n=Object(d.a)(t,3),i=n[0],o=n[1],u=n[2],s={headers:{"x-api-key":P}},p="".concat(F,"/favourites"),f="".concat(F,"/votes");Object(a.useEffect)((function(){var t=function(){var t=Object(C.a)(E.a.mark((function t(){var n,r,a,i;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,r="".concat(F,"/images?limit=10"),t.prev=2,t.next=5,Object(U.get)(r,s);case 5:n=t.sent,t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),a=t.t0.response,n=a;case 12:return t.prev=12,"4"===(i=String(n.status).slice(0,1))&&l.b.error(n.data.message),"2"===i&&e((c=n.data,{type:X,payload:{list:c}})),t.finish(12);case 17:case"end":return t.stop()}var c}),t,null,[[2,8,12,17]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(C.a)(E.a.mark((function t(){var n,r,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,t.next=4,Object(U.get)(p,s);case 4:n=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),r=t.t0.response,n=r;case 11:return t.prev=11,"4"===(a=String(n.status).slice(0,1))&&l.b.error(n.data.message),"2"===a&&e((i=n.data,{type:q,payload:{list:i}})),t.finish(11);case 16:case"end":return t.stop()}var i}),t,null,[[1,7,11,16]])})));return function(){return t.apply(this,arguments)}}(),r=function(){var t=Object(C.a)(E.a.mark((function t(){var n,r,a;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,t.next=4,Object(U.get)(f,s);case 4:n=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),r=t.t0.response,n=r;case 11:return t.prev=11,"4"===(a=String(n.status).slice(0,1))&&l.b.error(n.data.message),"2"===a&&e((i=n.data,{type:W,payload:{list:i}})),t.finish(11);case 16:case"end":return t.stop()}var i}),t,null,[[1,7,11,16]])})));return function(){return t.apply(this,arguments)}}();t(),n(),r()}),[]);var b=function(e,t,n){(function(){var r=Object(C.a)(E.a.mark((function r(){var a,i;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=null,r.prev=1,!n){r.next=8;break}return r.next=5,Object(U.delete)("".concat(f,"/").concat(n.id),s);case 5:a=r.sent,r.next=11;break;case 8:return r.next=10,Object(U.post)(f,{value:t,image_id:e},s);case 10:a=r.sent;case 11:r.next=17;break;case 13:r.prev=13,r.t0=r.catch(1),i=r.t0.response,a=i;case 17:return r.prev=17,Object(l.b)(a.status),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[1,13,17,20]])})));return function(){return r.apply(this,arguments)}})()()};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h1",{children:"Nice list of cats"}),Object(r.jsx)(Z,{children:i.map((function(t){var n=o.find((function(e){return e.image_id===t.id})),a=u.find((function(e){return e.image_id===t.id&&1===e.value})),i=u.find((function(e){return e.image_id===t.id&&0===e.value}));return Object(r.jsxs)("div",{children:[Object(r.jsx)(Y,{image:t.url}),Object(r.jsxs)(Q,{children:[Object(r.jsx)("div",{}),Object(r.jsx)($,{title:Object(r.jsx)(v,{image:"like.gif"}),children:Object(r.jsx)(R.a,{size:"small",color:"primary","aria-label":"Like this image",onClick:function(){return b(t.id,1,a)},children:a?Object(r.jsx)(V.a,{}):Object(r.jsx)(z.a,{})})}),Object(r.jsx)($,{title:Object(r.jsx)(v,{image:"dislike.gif"}),children:Object(r.jsx)(R.a,{size:"small",color:"primary","aria-label":"Dislike this image",onClick:function(){return b(t.id,0,i)},children:i?Object(r.jsx)(D.a,{}):Object(r.jsx)(N.a,{})})}),Object(r.jsx)($,{title:Object(r.jsx)(v,{image:"".concat(n?"bye":"love",".gif")}),children:Object(r.jsx)(R.a,{size:"small",color:"secondary","aria-label":"Add to favourite",onClick:function(){return r=t.id,a=n,void function(){var t=Object(C.a)(E.a.mark((function t(){var n,i,c;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,t.prev=1,!a){t.next=8;break}return t.next=5,Object(U.delete)("".concat(p,"/").concat(a.id),s);case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,Object(U.post)(p,{image_id:r},s);case 10:n=t.sent;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),i=t.t0.response,n=i;case 17:return t.prev=17,"4"===(c=String(n.status).slice(0,1))&&l.b.error(n.data.message),"2"===c&&e(a?M(r):M(r,n.data.id)),t.finish(17);case 22:case"end":return t.stop()}}),t,null,[[1,13,17,22]])})));return function(){return t.apply(this,arguments)}}()();var r,a},children:n?Object(r.jsx)(L.a,{}):Object(r.jsx)(A.a,{})})})]})]},t.id)}))})]})},te=n(49),ne=n(317);function re(){var e=Object(p.a)(["\n  && {\n    position: absolute;\n    left: -999px;\n  }\n"]);return re=function(){return e},e}function ae(){var e=Object(p.a)(["\n"]);return ae=function(){return e},e}function ie(){var e=Object(p.a)(["\n  width: 120px;\n  overflow: hidden;\n  position: relative;\n  grid-row: 1/2;\n  grid-column: 3/4;\n"]);return ie=function(){return e},e}function ce(){var e=Object(p.a)(["\n  grid-row: 2/3;\n  grid-column: 3/4;\n"]);return ce=function(){return e},e}function oe(){var e=Object(p.a)(["\n  background-image: url(",");\n  width: 160px;\n  height: 90px;\n  background-size: contain;\n  background-position: center center;\n  background-repeat: no-repeat;\n\n  grid-row: 1/3;\n  grid-column: 2/3;\n"]);return oe=function(){return e},e}function ue(){var e=Object(p.a)(["\n  margin: 2rem auto;\n  display: grid;\n  grid-template-columns: 1fr repeat(2, auto) 1fr;\n  grid-template-rows: repeat(2, auto);\n  grid-gap: 1rem;\n"]);return ue=function(){return e},e}var se=f.a.div(ue()),le=f.a.div(oe(),(function(e){return e.src})),de=Object(f.a)(O.a)(ce()),pe=Object(f.a)(O.a)(ie()),fe=(Object(f.a)(te.a)(ae()),Object(f.a)(ne.a)(re())),be=n(87),je={file:null},ve=be.b().shape({file:be.a().required("Select a file to upload first")}),ge=function(){var e=Object(a.useState)(),t=Object(d.a)(e,2),n=t[0],i=t[1];return Object(r.jsx)("div",{children:Object(r.jsx)(te.c,{initialValues:je,onSubmit:function(e){var t="".concat(F,"/images/upload"),n=new FormData;n.append("file",e.file);var r={headers:{"Content-Type":"multipart/form-data","X-Api-Key":P}};(function(){var e=Object(C.a)(E.a.mark((function e(){var a,i,c,u,s;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null,e.prev=1,e.next=4,Object(U.post)(t,n,r);case 4:a=e.sent,l.b.success('File "'.concat(a.data.original_filename,'" uploaded successfully')),Object(o.c)("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),i=e.t0.response,a=i;case 13:return e.prev=13,u=(c=a).status,s=c.data,400===u&&l.b.error(s.message),e.finish(13);case 17:case"end":return e.stop()}}),e,null,[[1,9,13,17]])})));return function(){return e.apply(this,arguments)}})()()},validationSchema:ve,children:function(e){e.isSubmitting;var t=e.isValid;return Object(r.jsx)(te.b,{children:Object(r.jsxs)(se,{children:[Object(r.jsx)(le,{src:n}),Object(r.jsx)(te.a,{name:"file",id:"file",type:"file",children:function(e){e.field;var t=e.form;e.meta;return Object(r.jsxs)(pe,{variant:"contained",component:"label",color:"primary",children:[Object(r.jsx)("span",{children:"select file"}),Object(r.jsx)(fe,{type:"file",accept:"image/*",onChange:function(e){return function(e,t){var n=e.target.files;t("file",e.target.files[0]),i(n.length?URL.createObjectURL(e.target.files[0]):"")}(e,t.setFieldValue)}})]})}}),Object(r.jsx)(de,{type:"submit",variant:"contained",color:"secondary",disabled:!t,children:"Upload"})]})})}})})},Oe=(n(275),function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(S,{}),Object(r.jsxs)(o.b,{children:[Object(r.jsx)(ee,{path:"/"}),Object(r.jsx)(ge,{path:"/upload"})]}),Object(r.jsx)(s.a,{fonts:[{font:"Roboto",weights:["400"]}]}),Object(r.jsx)(l.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}),me=n(25),he=n(138),xe=n(15),ye=[],ke=[],we=[],_e=Object(me.c)({vote:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return t.payload.list;case B:return t.payload.voteId?[].concat(Object(xe.a)(e),[{image_id:t.payload.imageId,id:t.payload.voteId}]):e.filter((function(e){return e.image_id!==t.payload.imageId}));default:return e}},favourite:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return t.payload.list;case J:return t.payload.favouriteId?[].concat(Object(xe.a)(e),[{image_id:t.payload.imageId,id:t.payload.favouriteId}]):e.filter((function(e){return e.image_id!==t.payload.imageId}));default:return e}},list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return t.payload.list;default:return e}}}),Ie=Object(me.c)({cat:_e}),Se=function(e){var t=[he.a],n=[me.a.apply(void 0,t)],r=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):me.d).apply(void 0,n);return Object(me.e)(Ie,e,r)},Te=(n(276),Se()),Ee=Object(r.jsx)(c.a,{store:Te,children:Object(r.jsx)(Oe,{})}),Ce=document.querySelector("#here");Object(i.render)(Ee,Ce)}},[[277,1,2]]]);
//# sourceMappingURL=main.4e99ec44.chunk.js.map